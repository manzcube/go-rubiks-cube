# Rubiks Cube Model

Simulation of a Rubiks Cube. Using go web server and THREE.js in React/typescript to generate a 3D model of the data structure.

### Journey

I started creating a [6][3][3]int struct to represent the cube. With this apprach I was able to represent in a 2-dimensional way all six faces of the cube.
With this approach I just had to loop over each slice to map css color to each sticker of the cube (9\*6 = 54 stickers).

And turning the cube, was just looping over those faces and swapping the certain elements for each cube face.

When doing more turning, colors swapped incorrectly, because each sticker didn't had any position, neither was attached to a piece, neither had its colors group.

There was when I decided to elaborate more on it, I tried couple variation till ending up with []Piece.

Where Piece is a 3 prop struct: Tensor, Colors and PieceType.

Tensor is a []int of length 3, representing a piece's 3-dimensional space position

Colors is a []string of lengths 1, 2 or 3. Representing the colors each piece has: Centers have 1 color, Edges have 2 colors and Corners have 3 colors.

Then I tried to generate all the data with combinatorics functions. Which worked pretty well, I had a function generating all posible combinations of [0, 1, 2] with position-sensitive, meaning that [1, 0, 0] is different from [0, 0, 1]

Then a function that generates all colors, respecting opposite colors (meaning that yellow and white could not be in the same slice, neither blue and green or red and orange). And not position-sensitive. So [Green, Red], is the same piece as [Red, Green] (so we don0t want two of those xd).

And then assign their respective piece type to each one based on the color slice length.

This concluded in some problems as:

- When assigning colors to each piece I had to reorder the colors slices so 3 color slice is not assigned to a center piece for example.
- Then swapping pieces fo I can get the default cube state, or avoiding impossible states. Basically each piece tensor with their respective colors.
- The major problem was then passing this to THREEjs which creates 6 faces cubes (as pieces), so coloring a 6 face cube in THREEjs default order with 1, 2 or 3 length array concludes in having dozens of if/else statements that update those colors so they match their positions.
- On top of this after doing all of that, I got the cube in default state, all pieces with their respective colors, but obviously, when starting to turn, everything broke. Colors had no direction to go, and I was swapping just color slices, without having in mind their tensor(position).

So I redone that to have a default list of colors combinations. Because I also tried creating a function that sets color slices of each piece in rigth order(clockwise), centers would have just first element, then edges top-bottom, corners(top-right-bottom). With this I mean just ordering the colors of each piece. Was actually pointless.

Currently:

Generation

- Colors combinations are already written
- Tensors/positions are generated by combinations
- Color assignation is done by one function

Turning

- Colors slices are swapped among pieces involved in each turn.
- Pieces are rotated in their positon based on last turn.

30/01/2024
The model works, default and turning functionality, I already solved once.

The 2 main problems before saying is done are:

- THREEjs scene control. Is an absolute headache trying to move around the cube while solving it. After each turn, the cube changes size and scene position. And sometimes enter in infinite rotation.
- Faces have fixed turning viewpoint, that means that there is no z, x, y movements implemented. When the cube is white down, you gotta use opposite movements, which makes it very complicated to solve.
